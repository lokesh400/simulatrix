<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Young's Double Slit Simulator — Lab Style</title>
<style>
body { margin:0; font-family:sans-serif; background:#121212; color:#eee; }
header { padding:12px 20px; background:#1b1b1b; font-size:18px; font-weight:600; box-shadow:0 2px 5px rgba(0,0,0,0.5);}
main { display:flex; height:calc(100vh - 48px);}
.controls {
  width:320px;
  background:#1e1e1e;
  padding:16px;
  overflow-y:auto;
  box-shadow: 2px 0 15px rgba(0,0,0,0.5);
}
.controls label { display:block; margin-top:12px; font-size:14px; }
.controls input, .controls select { width:100%; margin-top:4px; }
.canvas-container { flex:1; position:relative; background: linear-gradient(#1a1a1a,#222);}
canvas { width:100%; height:100%; display:block; background:transparent;}
.info {
  position:absolute; bottom:10px; left:10px; background:rgba(0,0,0,0.6); padding:8px 12px; border-radius:6px; font-size:14px;
}
</style>
</head>
<body>
<header>Young’s Double Slit Experiment — Lab Simulator</header>
<main>
  <div class="controls">
    <label>Slit Separation (d, px) <span id="dLabel">100</span></label>
    <input type="range" id="dRange" min="20" max="200" value="100">
    
    <label>Screen Distance (D, px) <span id="DLabel">400</span></label>
    <input type="range" id="DRange" min="100" max="800" value="400">
    
    <label>Wavelength (λ, px) <span id="lambdaLabel">40</span></label>
    <input type="range" id="lambdaRange" min="10" max="100" value="40">
    
    <label>Slit Width (a, px) <span id="aLabel">20</span></label>
    <input type="range" id="aRange" min="5" max="50" value="20">
    
    <label>Wavefront Style</label>
    <select id="wavefronts">
      <option value="lines">Two Rays</option>
      <option value="wavefronts">Animated Wavefronts</option>
    </select>
  </div>

  <div class="canvas-container">
    <canvas id="canvas"></canvas>
    <div class="info" id="info"></div>
  </div>
</main>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const info = document.getElementById('info');

function resize() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}
window.addEventListener('resize', resize);
resize();

// Controls
const dRange = document.getElementById('dRange');
const DRange = document.getElementById('DRange');
const lambdaRange = document.getElementById('lambdaRange');
const aRange = document.getElementById('aRange');
const wavefronts = document.getElementById('wavefronts');

const dLabel = document.getElementById('dLabel');
const DLabel = document.getElementById('DLabel');
const lambdaLabel = document.getElementById('lambdaLabel');
const aLabel = document.getElementById('aLabel');

function updateLabels(){
  dLabel.textContent = dRange.value;
  DLabel.textContent = DRange.value;
  lambdaLabel.textContent = lambdaRange.value;
  aLabel.textContent = aRange.value;
}
[dRange,DRange,lambdaRange,aRange,wavefronts].forEach(el=>{
  el.addEventListener('input', updateLabels);
  el.addEventListener('input', draw);
});
updateLabels();

// Physics
function sinc(x){ return Math.abs(x)<1e-8 ? 1 : Math.sin(x)/x; }
function intensity(y, d, a, D, lambda){
  const k = Math.PI*d*y/(lambda*D);
  const env = Math.PI*a*y/(lambda*D);
  return Math.pow(Math.cos(k),2) * Math.pow(sinc(env),2);
}

let waveOffset = 0;

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const w = canvas.width, h = canvas.height;
  const centerX = w*0.2;
  const centerY = h/2;

  const d = parseFloat(dRange.value);
  const D = parseFloat(DRange.value);
  const lambda = parseFloat(lambdaRange.value);
  const a = parseFloat(aRange.value);

  // Wall
  ctx.fillStyle="#666";
  ctx.fillRect(centerX-10, centerY-200, 20, 400);

  // Slits
  const slit1Y = centerY - d/2;
  const slit2Y = centerY + d/2;
  ctx.fillStyle="#222";
  ctx.fillRect(centerX-10, slit1Y-a/2, 20, a);
  ctx.fillRect(centerX-10, slit2Y-a/2, 20, a);

  // Screen
  const screenX = centerX + D;
  ctx.strokeStyle="#ccc"; ctx.lineWidth=3;
  ctx.beginPath(); ctx.moveTo(screenX, centerY-300); ctx.lineTo(screenX, centerY+300); ctx.stroke();

  // Wavefronts or rays
  if(wavefronts.value === 'lines'){
    ctx.strokeStyle="#ff0"; ctx.lineWidth=2;
    ctx.beginPath();
    ctx.moveTo(centerX, slit1Y); ctx.lineTo(screenX, centerY);
    ctx.moveTo(centerX, slit2Y); ctx.lineTo(screenX, centerY);
    ctx.stroke();
  } else {
    ctx.strokeStyle="#ff0"; ctx.lineWidth=1;
    const spacing = 25;
    for(let r=spacing-waveOffset;r<D;r+=spacing){
      ctx.beginPath(); ctx.arc(centerX, slit1Y, r, 0, Math.PI*2); ctx.stroke();
      ctx.beginPath(); ctx.arc(centerX, slit2Y, r, 0, Math.PI*2); ctx.stroke();
    }
  }

  // Interference pattern
  const patternHeight = 600;
  const steps = patternHeight;
  for(let i=-steps/2;i<=steps/2;i++){
    const y=i;
    const I=intensity(y,d,a,D,lambda);
    ctx.fillStyle=(I>0.5)?"#fff":"#000";
    ctx.fillRect(screenX-5, centerY+y, 10,1);
  }

  // Central fringe marker
  ctx.strokeStyle="red"; ctx.beginPath();
  ctx.moveTo(screenX, centerY); ctx.lineTo(screenX+15, centerY); ctx.stroke();
  ctx.fillStyle="red"; ctx.fillText("Central Bright Fringe", screenX+20, centerY+5);

  // Fringe info
  const deltaY = lambda*D/d;
  info.textContent=`Fringe spacing Δy ≈ ${deltaY.toFixed(2)} px | λ=${lambda} | d=${d} | D=${D}`;
}

function animate(){
  waveOffset += 1;
  if(waveOffset>50) waveOffset=0;
  draw();
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
