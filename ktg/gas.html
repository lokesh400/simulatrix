<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gas Simulation</title>
<style>
  * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
  body { display: flex; flex-direction: column; align-items: center; background: #f3f6fb; margin: 0; }
  h2 { margin: 16px 0; color: #333; }
  #simContainer { position: relative; border: 2px solid #555; background: #fff; height: 400px; width: 600px; margin-top: 10px; overflow: hidden; }
  canvas { background: linear-gradient(180deg, #e8f0ff, #f9fdff); }
  #controls { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 15px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 15px; }
  label { display: flex; flex-direction: column; font-size: 14px; align-items: center; color: #222; }
  input[type=range] { width: 120px; }
  #stats { margin-top: 10px; font-size: 16px; color: #333; }
</style>
</head>
<body>
  <h2>üí® Interactive Gas Simulation (Boyle‚Äôs & Charles‚Äô Law)</h2>

  <div id="simContainer">
    <canvas id="canvas" width="600" height="400"></canvas>
  </div>

  <div id="controls">
    <label>Temperature üå°Ô∏è
      <input type="range" id="tempSlider" min="50" max="500" value="200">
      <span id="tempVal">200 K</span>
    </label>
    <label>Particles ‚ö™
      <input type="range" id="countSlider" min="10" max="150" value="60">
      <span id="countVal">60</span>
    </label>
    <label>Volume üì¶
      <input type="range" id="volumeSlider" min="300" max="600" value="600">
      <span id="volumeVal">600 px</span>
    </label>
  </div>

  <div id="stats">Pressure: <span id="pressure">0</span> Pa</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const tempSlider = document.getElementById('tempSlider');
const countSlider = document.getElementById('countSlider');
const volumeSlider = document.getElementById('volumeSlider');
const tempVal = document.getElementById('tempVal');
const countVal = document.getElementById('countVal');
const volumeVal = document.getElementById('volumeVal');
const pressureDisplay = document.getElementById('pressure');

let WIDTH = 600, HEIGHT = 400;
let particles = [];
let pressure = 0;
let lastPressureCheck = Date.now();

// Particle class
class Particle {
  constructor() {
    this.x = Math.random() * WIDTH;
    this.y = Math.random() * HEIGHT;
    this.vx = (Math.random() - 0.5) * 2;
    this.vy = (Math.random() - 0.5) * 2;
    this.radius = 4;
    this.color = `hsl(${Math.random()*360}, 80%, 60%)`;
  }
  update(temp) {
    this.x += this.vx;
    this.y += this.vy;
    // Wall collisions
    if (this.x < this.radius) { this.x = this.radius; this.vx *= -1; pressure++; }
    if (this.x > WIDTH - this.radius) { this.x = WIDTH - this.radius; this.vx *= -1; pressure++; }
    if (this.y < this.radius) { this.y = this.radius; this.vy *= -1; pressure++; }
    if (this.y > HEIGHT - this.radius) { this.y = HEIGHT - this.radius; this.vy *= -1; pressure++; }
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, 2*Math.PI);
    ctx.fillStyle = this.color;
    ctx.fill();
  }
}

// Initialize
function initParticles(n) {
  particles = [];
  for (let i = 0; i < n; i++) particles.push(new Particle());
}
initParticles(60);

function animate() {
  ctx.clearRect(0, 0, WIDTH, HEIGHT);
  const temp = parseFloat(tempSlider.value);
  const speedFactor = Math.sqrt(temp / 200);
  particles.forEach(p => {
    p.vx *= 0.99; p.vy *= 0.99; // little damping
    p.vx += (Math.random() - 0.5) * 0.05;
    p.vy += (Math.random() - 0.5) * 0.05;
    p.x += p.vx * speedFactor;
    p.y += p.vy * speedFactor;
    p.update(temp);
    p.draw();
  });

  // Compute & display pressure every 500ms
  const now = Date.now();
  if (now - lastPressureCheck > 500) {
    const P = Math.round((pressure / 500) * (temp / 100));
    pressureDisplay.textContent = P;
    pressure = 0;
    lastPressureCheck = now;
  }

  requestAnimationFrame(animate);
}
animate();

// Sliders
tempSlider.oninput = () => tempVal.textContent = tempSlider.value + ' K';
countSlider.oninput = () => {
  countVal.textContent = countSlider.value;
  initParticles(parseInt(countSlider.value));
};
volumeSlider.oninput = () => {
  volumeVal.textContent = volumeSlider.value + ' px';
  WIDTH = parseInt(volumeSlider.value);
  canvas.width = WIDTH;
};
</script>
</body>
</html>
