<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Horizontal Circular Motion - Realistic</title>
<script src="https://cdn.jsdelivr.net/npm/p5@1.7.0/lib/p5.min.js"></script>
<style>
  body { margin:0; overflow:hidden; background:#0a0f24; color:white; font-family:'Segoe UI',sans-serif; }
  #controls {
    position:absolute; top:10px; left:10px;
    background:rgba(0,0,0,0.5); padding:15px;
    border-radius:12px; backdrop-filter:blur(10px);
  }
  input[type="range"] { width:150px; }
  label { display:block; margin-top:5px; font-size:14px; }
</style>
</head>
<body>
<div id="controls">
  <h3>Horizontal Circular Motion</h3>
  <label>Mass (kg): <span id="massVal">1</span></label>
  <input type="range" id="mass" min="0.1" max="10" step="0.1" value="1">
  
  <label>Radius (m): <span id="radiusVal">2</span></label>
  <input type="range" id="radius" min="0.5" max="5" step="0.1" value="2">
  
  <label>Speed (m/s): <span id="speedVal">3</span></label>
  <input type="range" id="speed" min="0.1" max="10" step="0.1" value="3">
  
  <label><input type="checkbox" id="direction"> Reverse Direction</label>
</div>

<script>
let centerX, centerY, angle=0;
let mass=1, radius=2, speed=3;
let trace=[];
let dt = 0.02;

function setup() {
  createCanvas(windowWidth, windowHeight);
  centerX = width/2;
  centerY = height/2;

  // Sliders
  select("#mass").input(()=>{ mass = parseFloat(select("#mass").value()); select("#massVal").html(mass); });
  select("#radius").input(()=>{ radius = parseFloat(select("#radius").value()); select("#radiusVal").html(radius); });
  select("#speed").input(()=>{ speed = parseFloat(select("#speed").value()); select("#speedVal").html(speed); });
}

function draw() {
  background(10,15,36);

  // Draw floor disc for 3D effect
  noStroke(); fill(30,50,80,100);
  ellipse(centerX, centerY, radius*200*2.2, radius*200*2.2);

  // Update angle
  let dir = select("#direction").elt.checked ? -1 : 1;
  let omega = speed/radius;
  angle += omega * dt * dir;

  // Particle position
  let x = centerX + radius*100*cos(angle);
  let y = centerY + radius*50*sin(angle); // ellipse to simulate 3D

  // Trace
  trace.push([x,y]);
  if(trace.length > 500) trace.shift();
  noFill(); stroke(255,200,0,150); strokeWeight(2);
  beginShape();
  for(let p of trace) vertex(p[0], p[1]);
  endShape();

  // Draw circular path
  noFill(); stroke(100,150,255,120); strokeWeight(2);
  ellipse(centerX, centerY, radius*200*2, radius*100*2);

  // Draw particle
  fill(255,100,50); stroke(200,50,0); strokeWeight(1);
  ellipse(x, y, 30, 30);

  // Velocity vector (tangent)
  let vx = -speed*sin(angle)*100*dir;
  let vy = speed*cos(angle)*50*dir;
  stroke(0,255,0); strokeWeight(3);
  line(x, y, x+vx*0.3, y+vy*0.3);
  fill(0,255,0); noStroke();
  ellipse(x+vx*0.3, y+vy*0.3,6,6);
  textSize(14); fill(0,255,0); text("v", x+vx*0.35, y+vy*0.35);

  // Centripetal force vector (toward center)
  let fx = centerX - x;
  let fy = centerY - y;
  let fmag = mass*speed*speed/radius;
  stroke(255,0,0); strokeWeight(3);
  line(x, y, x+fx*0.15, y+fy*0.15);
  fill(255,0,0); noStroke();
  ellipse(x+fx*0.15, y+fy*0.15,6,6);
  textSize(14); fill(255,0,0); text("Fc", x+fx*0.17, y+fy*0.17);

  // Info display
  fill(255); noStroke();
  textSize(16);
  text(`Mass: ${mass} kg | Radius: ${radius} m | Speed: ${speed} m/s`, 20, 20);
  text(`Angular Velocity Ï‰: ${omega.toFixed(2)} rad/s`, 20, 40);
  text(`Centripetal Force Fc: ${fmag.toFixed(2)} N`, 20, 60);
  text(`Period T: ${(2*PI/omega).toFixed(2)} s`, 20, 80);
  text(`Direction: ${dir>0?"Clockwise":"Counter-Clockwise"}`, 20, 100);
}

window.addEventListener('resize', ()=>{
  resizeCanvas(windowWidth, windowHeight);
  centerX = width/2; centerY = height/2;
});
</script>
</body>
</html>
